(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ebf9765"],{1276:function(t,e,r){"use strict";var a=r("d784"),o=r("44e7"),i=r("825a"),n=r("1d80"),s=r("4840"),c=r("8aa5"),l=r("50c4"),u=r("14c3"),d=r("9263"),p=r("d039"),m=[].push,f=Math.min,h=4294967295,v=!p((function(){return!RegExp(h,"y")}));a("split",2,(function(t,e,r){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var a=String(n(this)),i=void 0===r?h:r>>>0;if(0===i)return[];if(void 0===t)return[a];if(!o(t))return e.call(a,t,i);var s,c,l,u=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,v=new RegExp(t.source,p+"g");while(s=d.call(v,a)){if(c=v.lastIndex,c>f&&(u.push(a.slice(f,s.index)),s.length>1&&s.index<a.length&&m.apply(u,s.slice(1)),l=s[0].length,f=c,u.length>=i))break;v.lastIndex===s.index&&v.lastIndex++}return f===a.length?!l&&v.test("")||u.push(""):u.push(a.slice(f)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var o=n(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,o,r):a.call(String(o),e,r)},function(t,o){var n=r(a,t,this,o,a!==e);if(n.done)return n.value;var d=i(t),p=String(this),m=s(d,RegExp),C=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),g=new m(v?d:"^(?:"+d.source+")",b),_=void 0===o?h:o>>>0;if(0===_)return[];if(0===p.length)return null===u(g,p)?[p]:[];var y=0,O=0,S=[];while(O<p.length){g.lastIndex=v?O:0;var k,j=u(g,v?p:p.slice(O));if(null===j||(k=f(l(g.lastIndex+(v?0:O)),p.length))===y)O=c(p,O,C);else{if(S.push(p.slice(y,O)),S.length===_)return S;for(var x=1;x<=j.length-1;x++)if(S.push(j[x]),S.length===_)return S;O=y=k}}return S.push(p.slice(y)),S}]}),!v)},"159b":function(t,e,r){var a=r("da84"),o=r("fdbc"),i=r("17c2"),n=r("9112");for(var s in o){var c=a[s],l=c&&c.prototype;if(l&&l.forEach!==i)try{n(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(t,e,r){"use strict";var a=r("b727").forEach,o=r("a640"),i=r("ae40"),n=o("forEach"),s=i("forEach");t.exports=n&&s?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,r){"use strict";var a=r("23e7"),o=r("17c2");a({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"44e7":function(t,e,r){var a=r("861d"),o=r("c6b6"),i=r("b622"),n=i("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[n])?!!e:"RegExp"==o(t))}},"880c":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("a15b"),r("a434"),r("ac1f"),r("1276");var a={filters:{moneyFormat:function(t){t+="",t=t.split("");var e=-3,r=-t.length;while(e>r||-e- -r<3)t.splice(e,0,","),e-=4;return","===t[0]&&t.splice(0,1),t=t.join(""),t},timeFormat:function(t){if(void 0!==t){var e=t.split("~");t=e[0]+" 至 "+e[1]}return t},captureTime:function(t){if("string"===typeof t){var e=t.substring(0,19).split("T");t=e[0]+" "+e[1]}else t="尚未付款";return t},captureOrderID:function(t){return t=t.substring(0,8),t},setMemberFull:function(t){return!0===t?"尚未":"已滿員"},setCoupon:function(t){return!0===t?"啟用":"未啟用"}}}},"8aa5":function(t,e,r){"use strict";var a=r("6547").charAt;t.exports=function(t,e,r){return e+(r?a(t,e).length:1)}},a15b:function(t,e,r){"use strict";var a=r("23e7"),o=r("44ad"),i=r("fc6a"),n=r("a640"),s=[].join,c=o!=Object,l=n("join",",");a({target:"Array",proto:!0,forced:c||!l},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},a434:function(t,e,r){"use strict";var a=r("23e7"),o=r("23cb"),i=r("a691"),n=r("50c4"),s=r("7b0b"),c=r("65f0"),l=r("8418"),u=r("1dde"),d=r("ae40"),p=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,v=9007199254740991,C="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p||!m},{splice:function(t,e){var r,a,u,d,p,m,b=s(this),g=n(b.length),_=o(t,g),y=arguments.length;if(0===y?r=a=0:1===y?(r=0,a=g-_):(r=y-2,a=h(f(i(e),0),g-_)),g+r-a>v)throw TypeError(C);for(u=c(b,a),d=0;d<a;d++)p=_+d,p in b&&l(u,d,b[p]);if(u.length=a,r<a){for(d=_;d<g-a;d++)p=d+a,m=d+r,p in b?b[m]=b[p]:delete b[m];for(d=g;d>g-a+r;d--)delete b[d-1]}else if(r>a)for(d=g-a;d>_;d--)p=d+a-1,m=d+r-1,p in b?b[m]=b[p]:delete b[m];for(d=0;d<r;d++)b[d+_]=arguments[d+2];return b.length=g-a+r,u}})},a640:function(t,e,r){"use strict";var a=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&a((function(){r.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,r){var a=r("83ab"),o=r("d039"),i=r("5135"),n=Object.defineProperty,s={},c=function(t){throw t};t.exports=function(t,e){if(i(s,t))return s[t];e||(e={});var r=[][t],l=!!i(e,"ACCESSORS")&&e.ACCESSORS,u=i(e,0)?e[0]:c,d=i(e,1)?e[1]:void 0;return s[t]=!!r&&!o((function(){if(l&&!a)return!0;var t={length:-1};l?n(t,1,{enumerable:!0,get:c}):t[1]=1,r.call(t,u,d)}))}},b789:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"CartMain"},[r("h1",{staticClass:"CartTitle"},[t._v("購物車")]),"CartList"!==t.CurrentType?r("el-steps",{attrs:{active:t.steps,simple:""}},[r("el-step",{attrs:{title:"訂單成立",icon:"el-icon-s-order"}}),r("el-step",{attrs:{title:"結帳付款",icon:"el-icon-s-finance"}}),r("el-step",{attrs:{title:"訂單完成",icon:"el-icon-s-claim"}})],1):t._e(),t.isShow("CartList")?r("Cart"):t._e(),t.isShow("SetOrder")?r("SetOrder"):t._e(),t.isShow("CheckOut")?r("CheckOut",{attrs:{Payment:t.Payment}}):t._e(),t.isShow("Completed")?r("Completed"):t._e()],1)},o=[],i=r("d4ec"),n=r("bee2"),s=r("262e"),c=r("2caf"),l=r("9ab4"),u=r("2b0e"),d=r("60a3"),p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"Completed"},[r("h2",[t._v("感謝您的訂購，歡迎您再次光臨")]),r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"item"},[r("p",[t._v("完成時間："+t._s(t.orderCreated))])]),r("div",{staticClass:"item"},[r("p",[t._v("訂單編號："+t._s(t._f("captureOrderID")(t.orderID)))])]),r("div",{staticClass:"item"},[r("p",[t._v("訂單金額：$"+t._s(t._f("moneyFormat")(t.orderAmount)))])])]),t.isShowCoupon?r("div",{staticClass:"Coupons"},[r("h3",[t._v("贈送折扣碼："+t._s(t.couponCode))])]):t._e(),r("router-link",{attrs:{to:"/Product"}},[r("el-button",[t._v("繼續選購")])],1)],1)])},m=[],f=(r("d3b7"),r("25f0"),r("4bb5")),h=r("880c"),v=Object(f["b"])("cart"),C=(r("4328"),function(t){Object(s["a"])(r,t);var e=Object(c["a"])(r);function r(){var t;return Object(i["a"])(this,r),t=e.apply(this,arguments),t.isShowCoupon=!1,t.couponCode="",t.orderID="",t.orderCreated="",t.orderAmount="",t}return Object(n["a"])(r,[{key:"mounted",value:function(){this.orderID=this.OrderInfo.id,this.orderCreated=this.OrderInfo.datetime,this.orderAmount=this.OrderInfo.amount.toString();var t=+this.orderAmount;t>2e4?(this.isShowCoupon=!0,this.couponCode="COUPON_TWO"):t>1e4&&(this.isShowCoupon=!0,this.couponCode="COUPON_ONE")}}]),r}(u["default"]));Object(l["a"])([v.State("OrderInfo")],C.prototype,"OrderInfo",void 0),C=Object(l["a"])([Object(d["a"])({mixins:[h["a"]]})],C);var b=C,g=b,_=r("2877"),y=Object(_["a"])(g,p,m,!1,null,null,null),O=y.exports,S=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"CheckOut"},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("結帳資訊")])]),r("div",{staticClass:"item"},[r("p",[t._v("姓名：")]),r("p",[t._v(t._s(t.SetForm.name))])]),r("div",{staticClass:"item"},[r("p",[t._v("手機號碼：")]),r("p",[t._v(t._s(t.SetForm.tel))])]),r("div",{staticClass:"item"},[r("p",[t._v("Email：")]),r("p",[t._v(t._s(t.SetForm.email))])]),r("div",{staticClass:"item"},[r("p",[t._v("付款方式：")]),r("p",[t._v(t._s(t.SetForm.payment))])]),r("div",{staticClass:"item"},[r("p",[t._v("地址：")]),r("p",[t._v(t._s(t.SetForm.address))])]),r("div",{staticClass:"item"},[r("p",[t._v("備註：")]),r("p",[t._v(t._s(t.SetForm.message))])])]),r("el-card",{staticClass:"box-card orderInfo"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("訂單資訊")])]),r("div",{staticClass:"item"},[r("p",[t._v("訂單成立時間：")]),r("p",[t._v(t._s(t.orderCreated))])]),r("div",{staticClass:"item"},[r("p",[t._v("訂單編號：")]),r("p",[t._v(t._s(t._f("captureOrderID")(t.orderID)))])]),r("div",{staticClass:"item"},[r("p",[t._v("總金額：")]),r("p",[t._v("$"+t._s(t._f("moneyFormat")(t.orderAmount)))])])]),r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("結帳資訊")])]),"ATM"==t.Payment?r("h3",[t._v("前往 ATM 繳款")]):t._e(),"Credit"==t.Payment?r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px","label-position":"top"}},[r("el-form-item",{attrs:{label:"信用卡卡號",prop:"card",required:""}},[r("el-input",{attrs:{maxlength:"16"},model:{value:t.form.card,callback:function(e){t.$set(t.form,"card",t._n(e))},expression:"form.card"}})],1),r("el-form-item",{attrs:{label:"有效期限",prop:"date",required:""}},[r("el-date-picker",{attrs:{type:"month",placeholder:"有效期限"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),r("el-form-item",{attrs:{label:"背後末三碼",prop:"code",required:""}},[r("el-input",{attrs:{maxlength:"3"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",t._n(e))},expression:"form.code"}})],1)],1):t._e()],1),r("div",{staticClass:"item button"},["ATM"==t.Payment?r("el-button",{staticClass:"major",on:{click:function(e){return t.CheckOut(t.orderID)}}},[t._v("結帳")]):t._e(),"Credit"==t.Payment?r("el-button",{staticClass:"major",on:{click:function(e){return t.CheckOut(t.orderID,"form")}}},[t._v("結帳")]):t._e()],1)],1)])},k=[],j=r("ba6a"),x=r("7d26"),w=r("a4fd"),L=Object(f["b"])("cart"),I=(r("4328"),function(t){Object(s["a"])(r,t);var e=Object(c["a"])(r);function r(){var t;return Object(i["a"])(this,r),t=e.apply(this,arguments),t.orderID="",t.orderCreated="",t.orderAmount="",t.form={card:"1232123212321232",date:"",code:"123"},t.rules={card:[{required:!0,message:"請輸入信用卡卡號",trigger:"blur"},{type:"number",message:"請輸入正確的信用卡卡號",trigger:["blur","change"]}],date:[{required:!0,message:"請輸入有效期限",trigger:"blur"},{type:"date",message:"請輸入正確的有效期限",trigger:["blur","change"]}],code:[{required:!0,message:"請輸入背後末三碼",trigger:"blur"},{type:"number",length:3,message:"請輸入正確的背後末三碼",trigger:["blur","change"]}]},t}return Object(n["a"])(r,[{key:"mounted",value:function(){this.orderID=this.OrderInfo.id,this.orderCreated=this.OrderInfo.datetime,this.orderAmount=this.OrderInfo.amount.toString()}},{key:"CheckOut",value:function(t,e){e?this.$refs[e].validate((function(e){if(!e)return!1;w["a"].checkOut(t).then((function(t){x["c"].$emit("open-cart-type",{type:j["a"].Completed})}))})):w["a"].checkOut(t).then((function(t){x["c"].$emit("open-cart-type",{type:j["a"].Completed})}))}}]),r}(u["default"]));Object(l["a"])([Object(d["b"])(String)],I.prototype,"Payment",void 0),Object(l["a"])([L.State("SetOrderForm")],I.prototype,"SetForm",void 0),Object(l["a"])([L.State("CartList")],I.prototype,"cart",void 0),Object(l["a"])([L.State("OrderInfo")],I.prototype,"OrderInfo",void 0),I=Object(l["a"])([Object(d["a"])({mixins:[h["a"]]})],I);var $=I,E=$,T=Object(_["a"])(E,S,k,!1,null,null,null),A=T.exports,F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"CartLayout"},[r("div",{staticClass:"SetOrder"},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px","label-position":"top"}},[r("el-form-item",{attrs:{label:"姓名",prop:"name",required:""}},[r("el-input",{attrs:{type:"text"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"Email",prop:"email",required:""}},[r("el-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),r("el-form-item",{attrs:{label:"手機號碼",prop:"tel",required:""}},[r("el-input",{model:{value:t.form.tel,callback:function(e){t.$set(t.form,"tel",e)},expression:"form.tel"}})],1),r("el-form-item",{attrs:{label:"地址",prop:"address",required:""}},[r("el-input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),r("el-form-item",{attrs:{label:"優惠券",prop:"coupon"}},[r("el-input",{attrs:{disabled:""},model:{value:t.form.coupon,callback:function(e){t.$set(t.form,"coupon",e)},expression:"form.coupon"}})],1),r("el-form-item",{attrs:{label:"付款方式",prop:"payment",required:""}},[r("el-select",{attrs:{placeholder:"請選擇"},model:{value:t.form.payment,callback:function(e){t.$set(t.form,"payment",e)},expression:"form.payment"}},t._l(t.options,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),r("el-form-item",{attrs:{label:"備註"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message",e)},expression:"form.message"}})],1),r("el-form-item",[r("el-button",{staticClass:"major",on:{click:function(e){return t.submit("form")}}},[t._v("送出訂單")]),r("el-button",{on:{click:t.prevStep}},[t._v("返回")])],1)],1)],1),r("div",{staticClass:"Compute"},[r("div",{staticClass:"itemList"},t._l(t.cart.data,(function(e,a){return r("div",{key:a,staticClass:"item"},[r("p",[t._v(t._s(e.product.title)+" x "+t._s(e.quantity))]),r("h3",[t._v("$"+t._s(t._f("moneyFormat")(e.product.price)))])])})),0),r("div",{staticClass:"total Order"},[r("el-divider",[r("h2",[t._v("總計")])]),t.isShowCoupon?r("h3",[t._v("原價：$"+t._s(t._f("moneyFormat")(t.total)))]):t._e(),t.isShowCoupon?t._e():r("h1",[t._v("$"+t._s(t._f("moneyFormat")(t.total)))]),t.isShowCoupon?r("h1",[t._v("$"+t._s(t._f("moneyFormat")(t.discountTotal)))]):t._e()],1)])])])},q=[],P=Object(f["b"])("cart"),D=(r("4328"),function(t){Object(s["a"])(r,t);var e=Object(c["a"])(r);function r(){var t;return Object(i["a"])(this,r),t=e.apply(this,arguments),t.total="",t.discountTotal="",t.isShowCoupon=!1,t.form={name:"戴筱瑤",email:"maonome@gmail.com",tel:"0956530329",address:"1212",payment:"Credit",message:"",coupon:""},t.options=["Credit","ATM"],t.rules={name:[{required:!0,message:"請輸入名稱",trigger:"blur"},{type:"string",message:"請輸入正確的名稱",trigger:["blur","change"]}],email:[{required:!0,message:"請輸入電子信箱",trigger:"blur"},{type:"email",message:"請輸入正確的信箱",trigger:["blur","change"]}],tel:[{required:!0,message:"請輸入手機號碼",trigger:"blur"},{pattern:/^09\d{8}$/,message:"請輸入正確的手機",trigger:["blur","change"]}],address:[{required:!0,message:"請輸入地址",trigger:"blur"},{type:"string",message:"請輸入正確的地址",trigger:["blur","change"]}],payment:[{required:!0,message:"請選擇付款方式",trigger:"blur"}]},t}return Object(n["a"])(r,[{key:"mounted",value:function(){this.total=this.cart.total,this.cart.discountTotal&&this.cart.coupon&&(this.form.coupon=this.cart.coupon,this.discountTotal=this.cart.discountTotal,this.isShowCoupon=!0)}},{key:"submit",value:function(t){var e=this;this.$refs[t].validate((function(t){if(x["a"](!0),!t)return!1;e.SetOrderForm(e.form),w["a"].setOrder(e.form).then((function(t){e.SetOrderInfo({id:t.data.id,datetime:t.data.created.datetime,amount:t.data.amount}),x["g"](0),x["d"](j["a"].CheckOut,e.form.payment),x["a"](!1)}))}))}},{key:"prevStep",value:function(){this.$router.go(-1),x["d"](j["a"].CartList)}}]),r}(u["default"]));Object(l["a"])([P.State("CartList")],D.prototype,"cart",void 0),Object(l["a"])([P.State("OrderInfo")],D.prototype,"orderInfo",void 0),Object(l["a"])([Object(f["a"])("cart/SetOrderForm")],D.prototype,"SetOrderForm",void 0),Object(l["a"])([Object(f["a"])("cart/SetOrderInfo")],D.prototype,"SetOrderInfo",void 0),D=Object(l["a"])([Object(d["a"])({mixins:[h["a"]]})],D);var M=D,R=M,W=Object(_["a"])(R,F,q,!1,null,null,null),N=W.exports,U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"CartLayout"},[r("div",{staticClass:"Cart"},[0==t.CartList.length?r("div",{staticClass:"Product"},[r("h3",[t._v("無商品")])]):t._e(),t._l(t.CartList,(function(e,a){return r("div",{key:a,staticClass:"Product"},[r("div",{staticClass:"item flex-three image"},[r("img",{attrs:{src:e.product.imageUrl[1],alt:""}})]),r("div",{staticClass:"item flex-three align-left"},[r("h3",[t._v(t._s(e.product.title))])]),r("div",{staticClass:"item flex-two"},[r("p",{staticClass:"productTitle"},[t._v("$"+t._s(t._f("moneyFormat")(e.product.price)))]),r("el-select",{on:{change:function(r){return t.editItem(e.product.id,e.quantity)}},model:{value:e.quantity,callback:function(r){t.$set(e,"quantity",r)},expression:"item.quantity"}},t._l(t.options,(function(t){return r("el-option",{key:t,attrs:{label:t,value:t}})})),1),r("p",[t._v("人")])],1),r("div",{staticClass:"delete"},[r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",plain:"",circle:""},on:{click:function(r){return t.deleteItem(e.product.id)}}})],1)])})),r("div",{staticClass:"Coupons"},[r("el-input",{attrs:{type:"text",placeholder:"請輸入優惠券代碼"},model:{value:t.couponsCode,callback:function(e){t.couponsCode=e},expression:"couponsCode"}}),r("el-button",{on:{click:function(e){return t.getCoupon(t.couponsCode)}}},[t._v("兌換")]),t.isShowCoupon?r("div",{staticClass:"CouponDelete"},[r("h4",[t._v("已使用優惠券："+t._s(t.Coupon))]),r("el-button",{attrs:{size:"mini"},on:{click:t.deleCoupon}},[t._v("刪除")])],1):t._e()],1)],2),r("div",{staticClass:"Compute"},[r("div",{staticClass:"itemList"},t._l(t.CartList,(function(e,a){return r("div",{key:a,staticClass:"item"},[r("p",[t._v(t._s(e.product.title)+" x "+t._s(e.quantity))]),r("h3",[t._v("$"+t._s(t._f("moneyFormat")(e.product.price)))])])})),0),r("div",{staticClass:"total"},[r("el-divider",[r("h2",[t._v("總計")])]),t.isShowCoupon?r("h3",[t._v("原價：$"+t._s(t._f("moneyFormat")(t.total)))]):t._e(),t.isShowCoupon?t._e():r("h1",[t._v("$"+t._s(t._f("moneyFormat")(t.total)))]),t.isShowCoupon?r("h1",[t._v("$"+t._s(t._f("moneyFormat")(t.discountTotal)))]):t._e(),r("el-button",{on:{click:t.nextStep}},[t._v("下一步")]),r("el-button",{staticClass:"major",on:{click:t.empty}},[t._v("清空購物車")])],1)])])])},B=[],J=(r("4160"),r("159b"),Object(f["b"])("cart")),z=(r("4328"),function(t){Object(s["a"])(r,t);var e=Object(c["a"])(r);function r(){var t;return Object(i["a"])(this,r),t=e.apply(this,arguments),t.CartList=[],t.CartListAndCoupon={},t.options=[1,2,3,4,5],t.total="",t.couponsCode="",t.Coupon="",t.isShowCoupon=!1,t.discount=0,t.discountTotal=0,t}return Object(n["a"])(r,[{key:"created",value:function(){this.getCart()}},{key:"getCoupon",value:function(t){var e=this;if(x["a"](!0),""!==t&&""===this.Coupon)w["a"].getCoupon(t).then((function(r){e.couponsCode="",e.Coupon=t,e.isShowCoupon=!0,e.discount=r.data.percent/100,e.discountTotal=+e.total*e.discount,e.CartListAndCoupon.coupon=t,e.CartListAndCoupon.discountTotal=e.discountTotal.toString(),e.setCartList(e.CartListAndCoupon),x["a"](!1)}));else{if(""!==this.Coupon)return"優惠券僅能使用乙張";if(""===t)return"請輸入優惠券"}}},{key:"deleCoupon",value:function(){this.isShowCoupon=!1,this.Coupon="",this.couponsCode=""}},{key:"getCart",value:function(){var t=this;x["a"](!0),w["a"].getCart().then((function(e){t.CartList=e.data,t.CartListAndCoupon.data=e.data;var r=0;t.CartListAndCoupon.data.forEach((function(t){r+=t.quantity*t.product.price})),t.total=r.toString(),t.CartListAndCoupon.total=t.total,t.setCartList(t.CartListAndCoupon),x["a"](!1)}))}},{key:"empty",value:function(){var t=this;this.$confirm("確認清空購物車？").then((function(e){x["a"](!0),w["a"].emptyCart().then((function(e){t.getCart(),x["g"](),x["a"](!1)}))})).catch((function(t){}))}},{key:"editItem",value:function(t,e){var r=this;x["a"](!0);var a={product:t,quantity:e.toString()};w["a"].editProduct(a).then((function(t){x["a"](!1),r.getCart()}))}},{key:"deleteItem",value:function(t){var e=this,r={product:t};this.$confirm("確認刪除？").then((function(a){x["a"](!0),w["a"].deleteProduct(t,r).then((function(t){e.getCart(),x["g"]()}))})).catch((function(t){}))}},{key:"nextStep",value:function(){0!==this.CartListAndCoupon.data.length&&x["d"](j["a"].SetOrder)}}]),r}(u["default"]));Object(l["a"])([J.State("CartList")],z.prototype,"cart",void 0),Object(l["a"])([Object(f["a"])("cart/setCartList")],z.prototype,"setCartList",void 0),z=Object(l["a"])([Object(d["a"])({mixins:[h["a"]]})],z);var G=z,H=G,K=Object(_["a"])(H,U,B,!1,null,null,null),Q=K.exports,V=function(t){Object(s["a"])(r,t);var e=Object(c["a"])(r);function r(){var t;return Object(i["a"])(this,r),t=e.apply(this,arguments),t.CurrentType=j["a"].CartList,t.CartList=j["a"].CartList,t.SetOrder=j["a"].SetOrder,t.CheckOut=j["a"].CheckOut,t.Completed=j["a"].Completed,t.Payment="",t.steps=0,t}return Object(n["a"])(r,[{key:"isShow",value:function(t){return this.CurrentType===t}},{key:"changeStep",value:function(){switch(this.CurrentType){case"SetOrder":this.steps=1;break;case"CheckOut":this.steps=2;break;case"Completed":this.steps=3;break;default:break}}},{key:"mounted",value:function(){var t=this;x["c"].$on("open-cart-type",(function(e){t.CurrentType=e.type,t.$router.push({name:e.type}),t.Payment=e.id}))}}]),r}(u["default"]);Object(l["a"])([Object(d["c"])("CurrentType")],V.prototype,"changeStep",null),V=Object(l["a"])([Object(d["a"])({components:{Cart:Q,CheckOut:A,Completed:O,SetOrder:N}})],V);var X=V,Y=X,Z=Object(_["a"])(Y,a,o,!1,null,null,null);e["default"]=Z.exports},ba6a:function(t,e,r){"use strict";var a,o;r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return o})),function(t){t["TravelList"]="TravelList",t["Location"]="Location",t["SearchPage"]="SearchPage",t["RecommendPage"]="Recommend",t["Login"]="Login",t["Backoffice"]="Backoffice",t["CartList"]="CartList",t["SetOrder"]="SetOrder",t["CheckOut"]="CheckOut",t["Completed"]="Completed"}(a||(a={})),function(t){t["Information"]="Information",t["Warning"]="Warning",t["Error"]="Error",t["Success"]="Success",t["Confirmation"]="Confirmation",t["ConfirmationWithCancel"]="ConfirmationWithCancel"}(o||(o={}))}}]);
//# sourceMappingURL=chunk-7ebf9765.f928dfa9.js.map