(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f2b15ae","chunk-2d0d6049"],{1276:function(t,e,r){"use strict";var n=r("d784"),a=r("44e7"),o=r("825a"),i=r("1d80"),c=r("4840"),u=r("8aa5"),l=r("50c4"),s=r("14c3"),d=r("9263"),f=r("d039"),m=[].push,p=Math.min,b=4294967295,h=!f((function(){return!RegExp(b,"y")}));n("split",2,(function(t,e,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var n=String(i(this)),o=void 0===r?b:r>>>0;if(0===o)return[];if(void 0===t)return[n];if(!a(t))return e.call(n,t,o);var c,u,l,s=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,h=new RegExp(t.source,f+"g");while(c=d.call(h,n)){if(u=h.lastIndex,u>p&&(s.push(n.slice(p,c.index)),c.length>1&&c.index<n.length&&m.apply(s,c.slice(1)),l=c[0].length,p=u,s.length>=o))break;h.lastIndex===c.index&&h.lastIndex++}return p===n.length?!l&&h.test("")||s.push(""):s.push(n.slice(p)),s.length>o?s.slice(0,o):s}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var a=i(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,a,r):n.call(String(a),e,r)},function(t,a){var i=r(n,t,this,a,n!==e);if(i.done)return i.value;var d=o(t),f=String(this),m=c(d,RegExp),v=d.unicode,g=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(h?"y":"g"),y=new m(h?d:"^(?:"+d.source+")",g),_=void 0===a?b:a>>>0;if(0===_)return[];if(0===f.length)return null===s(y,f)?[f]:[];var k=0,O=0,w=[];while(O<f.length){y.lastIndex=h?O:0;var C,x=s(y,h?f:f.slice(O));if(null===x||(C=p(l(y.lastIndex+(h?0:O)),f.length))===k)O=u(f,O,v);else{if(w.push(f.slice(k,O)),w.length===_)return w;for(var j=1;j<=x.length-1;j++)if(w.push(x[j]),w.length===_)return w;O=k=C}}return w.push(f.slice(k)),w}]}),!h)},"159b":function(t,e,r){var n=r("da84"),a=r("fdbc"),o=r("17c2"),i=r("9112");for(var c in a){var u=n[c],l=u&&u.prototype;if(l&&l.forEach!==o)try{i(l,"forEach",o)}catch(s){l.forEach=o}}},"17c2":function(t,e,r){"use strict";var n=r("b727").forEach,a=r("a640"),o=r("ae40"),i=a("forEach"),c=o("forEach");t.exports=i&&c?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,r){"use strict";var n=r("23e7"),a=r("17c2");n({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"44e7":function(t,e,r){var n=r("861d"),a=r("c6b6"),o=r("b622"),i=o("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==a(t))}},"4de4":function(t,e,r){"use strict";var n=r("23e7"),a=r("b727").filter,o=r("1dde"),i=r("ae40"),c=o("filter"),u=i("filter");n({target:"Array",proto:!0,forced:!c||!u},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(t,e,r){"use strict";var n=r("0366"),a=r("7b0b"),o=r("9bdd"),i=r("e95a"),c=r("50c4"),u=r("8418"),l=r("35a1");t.exports=function(t){var e,r,s,d,f,m,p=a(t),b="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,g=void 0!==v,y=l(p),_=0;if(g&&(v=n(v,h>2?arguments[2]:void 0,2)),void 0==y||b==Array&&i(y))for(e=c(p.length),r=new b(e);e>_;_++)m=g?v(p[_],_):p[_],u(r,_,m);else for(d=y.call(p),f=d.next,r=new b;!(s=f.call(d)).done;_++)m=g?o(d,v,[s.value,_],!0):s.value,u(r,_,m);return r.length=_,r}},7181:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login_layout"},[r("div",{staticClass:"login"},[r("h1",[t._v("登入")]),r("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:t.dynamicValidateForm,rules:t.rules}},[r("el-form-item",{attrs:{prop:"email"}},[r("el-input",{attrs:{placeholder:"請輸入電子信箱"},model:{value:t.dynamicValidateForm.email,callback:function(e){t.$set(t.dynamicValidateForm,"email",e)},expression:"dynamicValidateForm.email"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"請輸入密碼"},model:{value:t.dynamicValidateForm.password,callback:function(e){t.$set(t.dynamicValidateForm,"password",e)},expression:"dynamicValidateForm.password"}})],1)],1),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.login(t.dynamicValidateForm)}}},[t._v("登入")])],1)])},a=[],o=r("d4ec"),i=r("bee2"),c=r("262e"),u=r("2caf"),l=r("9ab4"),s=r("2b0e"),d=r("4bb5"),f=r("60a3"),m=r("7d26"),p=r("f727"),b=Object(d["b"])("token"),h=function(t){Object(c["a"])(r,t);var e=Object(u["a"])(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.dynamicValidateForm={email:"",password:""},t.rules={email:[{required:!0,message:"請輸入電子信箱",trigger:"blur"},{type:"email",message:"請輸入正確的信箱",trigger:["blur","change"]}]},t}return Object(i["a"])(r,[{key:"login",value:function(t){var e=this;m["a"](!0),p["a"].login(t).then((function(t){localStorage.setItem("accessToken",t.token),e.setToken(t.token),e.$router.push({name:"Backoffice"}),m["h"](),m["a"](!1),e.$notify({title:"登入成功",message:"",position:"bottom-left",showClose:!1,duration:5e3,iconClass:"el-icon-lollipop",customClass:"alertItem_info"})}))}}]),r}(s["default"]);Object(l["a"])([b.State("token")],h.prototype,"token",void 0),Object(l["a"])([Object(d["a"])("token/setToken")],h.prototype,"setToken",void 0),h=Object(l["a"])([f["a"]],h);var v=h,g=v,y=r("2877"),_=Object(y["a"])(g,n,a,!1,null,null,null);e["default"]=_.exports},"880c":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("a15b"),r("a434"),r("ac1f"),r("1276");var n={filters:{moneyFormat:function(t){t+="",t=t.split("");var e=-3,r=-t.length;while(e>r||-e- -r<3)t.splice(e,0,","),e-=4;return","===t[0]&&t.splice(0,1),t=t.join(""),t},timeFormat:function(t){if(void 0!==t){var e=t.split("~");t=e[0]+" 至 "+e[1]}return t},captureTime:function(t){if("string"===typeof t){var e=t.substring(0,19).split("T");t=e[0]+" "+e[1]}else t="尚未付款";return t},captureOrderID:function(t){return t=t.substring(0,8),t},setMemberFull:function(t){return!0===t?"尚未":"已滿員"},setCoupon:function(t){return!0===t?"啟用":"未啟用"}}}},"8aa5":function(t,e,r){"use strict";var n=r("6547").charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},a15b:function(t,e,r){"use strict";var n=r("23e7"),a=r("44ad"),o=r("fc6a"),i=r("a640"),c=[].join,u=a!=Object,l=i("join",",");n({target:"Array",proto:!0,forced:u||!l},{join:function(t){return c.call(o(this),void 0===t?",":t)}})},a434:function(t,e,r){"use strict";var n=r("23e7"),a=r("23cb"),o=r("a691"),i=r("50c4"),c=r("7b0b"),u=r("65f0"),l=r("8418"),s=r("1dde"),d=r("ae40"),f=s("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,b=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!m},{splice:function(t,e){var r,n,s,d,f,m,g=c(this),y=i(g.length),_=a(t,y),k=arguments.length;if(0===k?r=n=0:1===k?(r=0,n=y-_):(r=k-2,n=b(p(o(e),0),y-_)),y+r-n>h)throw TypeError(v);for(s=u(g,n),d=0;d<n;d++)f=_+d,f in g&&l(s,d,g[f]);if(s.length=n,r<n){for(d=_;d<y-n;d++)f=d+n,m=d+r,f in g?g[m]=g[f]:delete g[m];for(d=y;d>y-n+r;d--)delete g[d-1]}else if(r>n)for(d=y-n;d>_;d--)f=d+n-1,m=d+r-1,f in g?g[m]=g[f]:delete g[m];for(d=0;d<r;d++)g[d+_]=arguments[d+2];return g.length=y-n+r,s}})},a630:function(t,e,r){var n=r("23e7"),a=r("4df4"),o=r("1c7e"),i=!o((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:i},{from:a})},a640:function(t,e,r){"use strict";var n=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,r){var n=r("83ab"),a=r("d039"),o=r("5135"),i=Object.defineProperty,c={},u=function(t){throw t};t.exports=function(t,e){if(o(c,t))return c[t];e||(e={});var r=[][t],l=!!o(e,"ACCESSORS")&&e.ACCESSORS,s=o(e,0)?e[0]:u,d=o(e,1)?e[1]:void 0;return c[t]=!!r&&!a((function(){if(l&&!n)return!0;var t={length:-1};l?i(t,1,{enumerable:!0,get:u}):t[1]=1,r.call(t,s,d)}))}},b64b:function(t,e,r){var n=r("23e7"),a=r("7b0b"),o=r("df75"),i=r("d039"),c=i((function(){o(1)}));n({target:"Object",stat:!0,forced:c},{keys:function(t){return o(a(t))}})},ba6a:function(t,e,r){"use strict";var n,a;r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return a})),function(t){t["TravelList"]="TravelList",t["Location"]="Location",t["SearchPage"]="SearchPage",t["RecommendPage"]="Recommend",t["Login"]="Login",t["Backoffice"]="Backoffice",t["CartList"]="CartList",t["SetOrder"]="SetOrder",t["CheckOut"]="CheckOut",t["Completed"]="Completed"}(n||(n={})),function(t){t["Information"]="Information",t["Warning"]="Warning",t["Error"]="Error",t["Success"]="Success",t["Confirmation"]="Confirmation",t["ConfirmationWithCancel"]="ConfirmationWithCancel"}(a||(a={}))},c4a6:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.isShow("Login")?r("Login"):t._e(),t.isShow("Backoffice")?r("Work"):t._e()],1)},a=[],o=r("d4ec"),i=r("bee2"),c=r("262e"),u=r("2caf"),l=r("9ab4"),s=r("2b0e"),d=r("60a3"),f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Backoffice"},[r("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"訂單列表",name:"1"}},["1"===t.activeName?r("OrderList"):t._e()],1),r("el-tab-pane",{attrs:{label:"優惠券",name:"2"}},["2"===t.activeName?r("Coupon"):t._e()],1),r("el-tab-pane",{attrs:{label:"產品列表",name:"3"}},["3"===t.activeName?r("ProductList"):t._e()],1)],1)],1)},m=[],p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-button",{staticClass:"addButton",on:{click:t.addButton}},[t._v("新增產品")]),r("el-table",{attrs:{"empty-text":"無商品",data:t.PageData[t.CurrentPage]}},[r("el-table-column",{attrs:{label:"行程分類"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.category))])]}}])}),r("el-table-column",{attrs:{label:"行程標題"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.title))])]}}])}),r("el-table-column",{attrs:{label:"已賣名額"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.origin_price))])]}}])}),r("el-table-column",{attrs:{label:"售價"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v("$"+t._s(t._f("moneyFormat")(e.row.price)))])]}}])}),r("el-table-column",{attrs:{label:"是否滿員"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t._f("setMemberFull")(e.row.enabled)))])]}}])}),r("el-table-column",{attrs:{label:"編輯"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return t.edit(e.row)}}},[t._v("編輯")]),r("el-button",{staticClass:"major",attrs:{size:"mini"},on:{click:function(r){return t.clearItem(e.row.id)}}},[t._v("刪除")])]}}])})],1),r("el-pagination",{attrs:{small:"",layout:"prev, pager, next","page-count":t.TotalPage},on:{"current-change":t.handleCurrentChange}}),r("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleClose}},[r("div",{staticClass:"fromImage"},[r("h2",[t._v("圖片預覽")]),r("div",{staticClass:"ImageItem"},[r("img",{attrs:{src:t.img1,alt:""}})]),r("div",{staticClass:"ImageItem"},[r("img",{attrs:{src:t.img2,alt:""}})]),r("div",{staticClass:"ImageItem"},[r("img",{attrs:{src:t.img3,alt:""}})])]),r("el-form",{ref:"form",attrs:{model:t.form}},[r("el-form-item",{attrs:{label:"主題圖"}},[r("el-input",{model:{value:t.img1,callback:function(e){t.img1=e},expression:"img1"}})],1),r("el-form-item",{attrs:{label:"行程圖"}},[r("el-input",{model:{value:t.img2,callback:function(e){t.img2=e},expression:"img2"}})],1),r("el-form-item",{attrs:{label:"行程圖"}},[r("el-input",{model:{value:t.img3,callback:function(e){t.img3=e},expression:"img3"}})],1),r("el-form-item",{attrs:{label:"行程標題"}},[r("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"出發日期"}},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),r("el-form-item",{attrs:{label:"回來日期"}},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),r("el-form-item",{attrs:{label:"行程分類"}},[r("el-input",{model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}})],1),r("el-form-item",{attrs:{label:"總人數"}},[r("el-input",{model:{value:t.form.unit,callback:function(e){t.$set(t.form,"unit",e)},expression:"form.unit"}})],1),r("el-form-item",{attrs:{label:"地點"}},[r("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),r("el-form-item",{attrs:{label:"已售人數"}},[r("el-input",{model:{value:t.form.origin_price,callback:function(e){t.$set(t.form,"origin_price",t._n(e))},expression:"form.origin_price"}})],1),r("el-form-item",{attrs:{label:"售價"}},[r("el-input",{model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",t._n(e))},expression:"form.price"}})],1),r("el-form-item",{attrs:{label:"是否滿員"}},[r("el-switch",{attrs:{"active-text":"未滿員","inactive-text":"滿員"},model:{value:t.form.enabled,callback:function(e){t.$set(t.form,"enabled",e)},expression:"form.enabled"}})],1),r("div",{staticClass:"footer"},[r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"cancel",on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t.submitButton?r("el-button",{on:{click:function(e){return t.submit(t.form)}}},[t._v("確定")]):t._e(),t.modifyButton?r("el-button",{on:{click:function(e){return t.modify(t.form)}}},[t._v("修改")]):t._e()],1)])],1)],1)],1)},b=[];r("a4d3"),r("e01a"),r("99af"),r("4160"),r("ac1f"),r("1276"),r("159b");function h(t){if(Array.isArray(t))return t}r("d28b"),r("d3b7"),r("3ca3"),r("ddb0");function v(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0)if(r.push(i.value),e&&r.length===e)break}catch(u){a=!0,o=u}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw o}}return r}}r("a630"),r("fb6a"),r("b0c0"),r("25f0");function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function y(t,e){if(t){if("string"===typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(t,e){return h(t)||v(t,e)||y(t,e)||_()}r("4de4"),r("e439"),r("dbb4"),r("b64b");var O=r("ade3");function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){Object(O["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function x(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=y(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==r["return"]||r["return"]()}finally{if(c)throw o}}}}var j=r("4bb5"),I=(r("96cf"),r("1da1")),L=r("c78c"),P="https://course-ec-api.hexschool.io/api/",S="59677b21-aeb1-45eb-8ac8-9fe077baa5a0",R={getBackofficeProductList:function(){return Object(I["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={method:"get",url:P+S+"/admin/ec/products"},t.next=3,L["a"].request(e);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})))()},getProductItem:function(t){return Object(I["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={method:"get",url:P+S+"/admin/ec/product/".concat(t)},e.next=3,L["a"].request(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))()},deleteProduct:function(t){return Object(I["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={method:"delete",url:P+S+"/admin/ec/product/".concat(t)},e.next=3,L["a"].request(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))()},addProductItem:function(t){return Object(I["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={method:"post",url:P+S+"/admin/ec/product",data:t},e.next=3,L["a"].request(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))()},modifyProductItem:function(t,e){return Object(I["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n={method:"patch",url:P+S+"/admin/ec/product/".concat(e),data:t},r.next=3,L["a"].request(n);case 3:return a=r.sent,r.abrupt("return",a.data);case 5:case"end":return r.stop()}}),r)})))()}},E=r("ba6a"),D=r("7d26"),V=r("880c"),B=Object(j["b"])("order"),$=(r("4328"),function(t){Object(c["a"])(r,t);var e=Object(u["a"])(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.dialogVisible=!1,t.ProductList=[],t.PageData={},t.CurrentPage=0,t.TotalPage=0,t.img1="",t.img2="",t.img3="",t.img4="",t.img5="",t.submitButton=!1,t.modifyButton=!1,t.startDate="",t.endDate="",t.soldList=[],t.selectRow={},t.form={id:"",title:"",category:"",content:"",description:"",imageUrl:[],enabled:!1,origin_price:0,price:0,unit:""},t}return Object(i["a"])(r,[{key:"created",value:function(){var t=this;this.OrderList.forEach((function(e){e.products.forEach((function(e){t.soldList=t.soldList.concat([e])}))})),this.getProductList()}},{key:"addButton",value:function(){this.dialogVisible=!0,this.submitButton=!0}},{key:"getProductList",value:function(){var t=this;D["a"](!0),R.getBackofficeProductList().then((function(e){t.ProductList=e.data,D["a"](!1)}))}},{key:"TotalePage",value:function(){var t=this,e=[];this.ProductList.forEach((function(r,n){var a,o=x(t.soldList);try{for(o.s();!(a=o.n()).done;){var i=a.value;i.product.title===r.title&&(r.origin_price=r.origin_price+i.quantity)}}catch(u){o.e(u)}finally{o.f()}+r.unit-r.origin_price===0&&(r.enabled=!1),n%10===0&&e.push([]);var c=Math.floor(n/10);e[c].push(r)})),this.TotalPage=e.length,this.PageData=e}},{key:"handleCurrentChange",value:function(t){this.CurrentPage=t-1}},{key:"edit",value:function(t){var e=this;D["a"](!0),this.dialogVisible=!0,this.modifyButton=!0,this.selectRow=C({},t),R.getProductItem(t.id).then((function(r){e.form.enabled=t.enabled,e.form=e.selectRow,e.form.description=r.data.description;var n=k(e.form.imageUrl,5);e.img1=n[0],e.img2=n[1],e.img3=n[2],e.img4=n[3],e.img5=n[4];var a=e.form.content.split("~");e.startDate=a[0],e.endDate=a[1],D["a"](!1)}))}},{key:"clearItem",value:function(t){var e=this;this.$confirm("確認刪除？").then((function(r){D["a"](!0),R.deleteProduct(t).then((function(t){e.getProductList(),D["a"](!1),D["b"](E["b"].Information,"刪除成功")}))})).catch((function(t){}))}},{key:"submit",value:function(t){var e=this;D["a"](!0),this.form.imageUrl=[this.img1,this.img2,this.img3,this.img4,this.img5],this.form.content=this.startDate+"~"+this.endDate,this.form.origin_price=+this.form.origin_price,R.addProductItem(t).then((function(t){e.dialogVisible=!1,D["b"](E["b"].Information,"新增成功"),D["a"](!1),e.getProductList()}))}},{key:"modify",value:function(t){var e=this;D["a"](!0),this.form.imageUrl=[this.img1,this.img2,this.img3,this.img4,this.img5],R.modifyProductItem(t,t.id).then((function(t){e.dialogVisible=!1,D["a"](!1),D["b"](E["b"].Information,"修改成功"),e.getProductList()}))}},{key:"handleClose",value:function(){this.form={id:"",title:"",category:"",content:"",description:"",imageUrl:[],enabled:!1,origin_price:0,price:0,unit:""},this.img1="",this.img2="",this.img3="",this.img4="",this.img5="",this.startDate="",this.endDate="",this.modifyButton=!1,this.submitButton=!1,this.dialogVisible=!1}}]),r}(s["default"]));Object(l["a"])([B.State("OrderList")],$.prototype,"OrderList",void 0),Object(l["a"])([Object(d["c"])("ProductList")],$.prototype,"TotalePage",null),$=Object(l["a"])([Object(d["a"])({mixins:[V["a"]]})],$);var T=$,A=T,q=r("2877"),F=Object(q["a"])(A,p,b,!1,null,null,null),M=F.exports,U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Coupon"},[r("el-button",{staticClass:"addButton",on:{click:function(e){t.dialogVisible=!0}}},[t._v("新增優惠券")]),r("el-table",{attrs:{"empty-text":"無商品",data:t.couponList}},[r("el-table-column",{attrs:{label:"標題"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.title))])]}}])}),r("el-table-column",{attrs:{label:"序號"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.code))])]}}])}),r("el-table-column",{attrs:{label:"折扣百分比"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.percent)+"%")])]}}])}),r("el-table-column",{attrs:{label:"是否啟用"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t._f("setCoupon")(e.row.enabled)))])]}}])}),r("el-table-column",{attrs:{label:"截止日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.deadline.datetime))])]}}])}),r("el-table-column",{attrs:{label:"編輯"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return t.edit(e.row.id)}}},[t._v("編輯")]),r("el-button",{staticClass:"major",attrs:{size:"mini"},on:{click:function(r){return t.deteteCoupon(e.row.id)}}},[t._v("刪除")])]}}])})],1),r("el-dialog",{attrs:{visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleClose}},[r("el-form",{ref:"form",attrs:{model:t.form}},[r("el-form-item",{attrs:{label:"標題"}},[r("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"序號"}},[r("el-input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),r("el-form-item",{attrs:{label:"折扣百分比"}},[r("el-input",{model:{value:t.form.percent,callback:function(e){t.$set(t.form,"percent",t._n(e))},expression:"form.percent"}})],1),r("el-form-item",{attrs:{label:"截止時間"}},[r("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.deadline_at,callback:function(e){t.$set(t.form,"deadline_at",e)},expression:"form.deadline_at"}})],1),r("el-form-item",{attrs:{label:"是否啟用"}},[r("el-switch",{attrs:{"active-text":"啟用","inactive-text":"不啟用"},model:{value:t.form.enabled,callback:function(e){t.$set(t.form,"enabled",e)},expression:"form.enabled"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"cancel",on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t.addCouponButton?r("el-button",{on:{click:function(e){return t.addCoupon(t.form)}}},[t._v("確定")]):t._e(),t.modifyButton?r("el-button",{on:{click:function(e){return t.modify(t.couponID,t.form)}}},[t._v("修改")]):t._e()],1)],1)],1)},N=[],W="https://course-ec-api.hexschool.io/api/",z="59677b21-aeb1-45eb-8ac8-9fe077baa5a0",H={getCouponList:function(){return Object(I["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={method:"get",url:W+z+"/admin/ec/coupons"},t.next=3,L["a"].request(e);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})))()},addCoupon:function(t){return Object(I["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={method:"post",url:W+z+"/admin/ec/coupon",data:t},e.next=3,L["a"].request(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))()},getCouponItem:function(t){return Object(I["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={method:"get",url:W+z+"/admin/ec/coupon/".concat(t)},e.next=3,L["a"].request(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))()},modifyCouponItem:function(t,e){return Object(I["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n={method:"patch",url:W+z+"/admin/ec/coupon/".concat(t),data:e},r.next=3,L["a"].request(n);case 3:return a=r.sent,r.abrupt("return",a.data);case 5:case"end":return r.stop()}}),r)})))()},deleteCouponItem:function(t){return Object(I["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={method:"delete",url:W+z+"/admin/ec/coupon/".concat(t)},e.next=3,L["a"].request(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))()}},J=function(t){Object(c["a"])(r,t);var e=Object(u["a"])(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.dialogVisible=!1,t.couponList=[],t.couponID="",t.modifyButton=!1,t.addCouponButton=!0,t.form={title:"",code:"",percent:0,enabled:!1,deadline_at:""},t}return Object(i["a"])(r,[{key:"created",value:function(){this.getCouponList()}},{key:"getCouponList",value:function(){var t=this;D["a"](!0),H.getCouponList().then((function(e){t.couponList=e.data,D["a"](!1)}))}},{key:"addCoupon",value:function(t){var e=this;D["a"](!0),H.addCoupon(t).then((function(t){e.dialogVisible=!1,D["a"](!1),e.getCouponList(),D["b"](E["b"].Information,"新增成功")}))}},{key:"deteteCoupon",value:function(t){var e=this;this.$confirm("確認刪除？").then((function(r){D["a"](!0),H.deleteCouponItem(t).then((function(t){e.getCouponList(),D["a"](!1),D["b"](E["b"].Information,"刪除成功")}))})).catch((function(t){}))}},{key:"edit",value:function(t){var e=this;D["a"](!0),this.modifyButton=!0,this.addCouponButton=!1,this.couponID=t,this.dialogVisible=!0,H.getCouponItem(t).then((function(t){e.form.code=t.data.code,e.form.title=t.data.title,e.form.percent=t.data.percent,e.form.enabled=t.data.enabled,e.form.deadline_at=t.data.deadline.datetime,D["a"](!1)}))}},{key:"modify",value:function(t,e){var r=this;D["a"](!0),H.modifyCouponItem(t,e).then((function(t){r.dialogVisible=!1,D["a"](!1),D["b"](E["b"].Information,"編輯成功"),r.getCouponList()}))}},{key:"handleClose",value:function(){this.form={title:"",code:"",percent:0,enabled:!1,deadline_at:""},this.modifyButton=!1,this.addCouponButton=!0}}]),r}(s["default"]);J=Object(l["a"])([Object(d["a"])({mixins:[V["a"]]})],J);var G=J,K=G,Q=Object(q["a"])(K,U,N,!1,null,null,null),X=Q.exports,Y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"OrderList"},[r("el-table",{attrs:{"empty-text":"無商品",data:t.PageData[t.CurrentPage]}},[r("el-table-column",{attrs:{label:"訂單 ID 前八碼"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t._f("captureOrderID")(e.row.id)))])]}}])}),r("el-table-column",{attrs:{label:"總金額"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v("$"+t._s(t._f("moneyFormat")(e.row.amount)))])]}}])}),r("el-table-column",{attrs:{label:"付款時間"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t._f("captureTime")(e.row.paid_at)))])]}}])}),r("el-table-column",{attrs:{label:"優惠券",prop:"coupon.code"}}),r("el-table-column",{attrs:{label:"更新時間",prop:"updated.datetime"}}),r("el-table-column",{attrs:{label:"編輯"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return t.edit(e.row.id)}}},[t._v("編輯")])]}}])})],1),r("el-pagination",{attrs:{"page-count":t.TotalPage,small:"",layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}}),r("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"item"},[r("p",[t._v("更新時間：")]),r("p",[t._v(t._s(t.time))])]),r("div",{staticClass:"item"},[r("p",[t._v("訂單編號：")]),r("p",[t._v(t._s(t._f("captureOrderID")(t.id)))])]),r("div",{staticClass:"item"},[r("p",[t._v("訂單金額：")]),r("p",[t._v("$"+t._s(t._f("moneyFormat")(t.amount)))])]),r("div",{staticClass:"item"},[r("p",[t._v("優惠券：")]),t.orderItem.coupon?r("p",[t._v(t._s(t.orderItem.coupon.code))]):t._e(),t.orderItem.coupon?t._e():r("p")]),r("el-divider",[r("h3",[t._v("購買產品")])]),t._l(t.orderItem.products,(function(e,n){return r("div",{key:n,staticClass:"item"},[r("p",[t._v(t._s(e.product.title)+" x "+t._s(e.quantity))])])}))],2),r("div",{staticClass:"changeOrder"},[r("h2",[t._v("修改訂單")]),r("h3",[t._v("訂單是否已付款")]),r("el-switch",{attrs:{"active-text":"已付","inactive-text":"未付"},model:{value:t.orderItem.paid,callback:function(e){t.$set(t.orderItem,"paid",e)},expression:"orderItem.paid"}})],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"cancel",on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),r("el-button",{on:{click:function(e){return t.modify(t.orderItem.paid,t.orderItem.id)}}},[t._v("修改")])],1)],1)],1)},Z=[],tt="https://course-ec-api.hexschool.io/api/",et="59677b21-aeb1-45eb-8ac8-9fe077baa5a0",rt={getOrderList:function(){return Object(I["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={method:"get",url:tt+et+"/admin/ec/orders"},t.next=3,L["a"].request(e);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})))()},getOrderItem:function(t){return Object(I["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={method:"get",url:tt+et+"/admin/ec/orders/".concat(t)},e.next=3,L["a"].request(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))()},setUnpaid:function(t){return Object(I["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={method:"patch",url:tt+et+"/admin/ec/orders/".concat(t,"/unpaid")},e.next=3,L["a"].request(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))()},setPaid:function(t){return Object(I["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={method:"patch",url:tt+et+"/admin/ec/orders/".concat(t,"/paid")},e.next=3,L["a"].request(r);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))()}},nt=function(t){Object(c["a"])(r,t);var e=Object(u["a"])(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.PageData={data:[],coupon:""},t.CurrentPage=0,t.TotalPage=0,t.orderList=[],t.orderItem={},t.id="",t.time="",t.amount=0,t.dialogVisible=!1,t.options=[1,2,3,4,5],t}return Object(i["a"])(r,[{key:"created",value:function(){this.getOrderList()}},{key:"TotalePage",value:function(){var t=[];this.orderList.forEach((function(e,r){r%10===0&&t.push([]);var n=Math.floor(r/10);t[n].push(e)})),this.TotalPage=t.length,this.PageData=t}},{key:"handleCurrentChange",value:function(t){this.CurrentPage=t-1}},{key:"getOrderList",value:function(){var t=this;D["a"](!0),rt.getOrderList().then((function(e){t.orderList=e.data,t.setOrderList(t.orderList),D["a"](!1)}))}},{key:"edit",value:function(t){var e=this;D["a"](!0),this.dialogVisible=!0,rt.getOrderItem(t).then((function(t){e.orderItem=t.data,e.id=e.orderItem.id,e.time=e.orderItem.updated.datetime,e.amount=e.orderItem.amount,D["a"](!1)}))}},{key:"modify",value:function(t,e){D["a"](!0),!0===t?rt.setPaid(e).then((function(t){})):rt.setUnpaid(e).then((function(t){})),this.dialogVisible=!1,D["a"](!1),D["b"](E["b"].Information,"編輯成功"),this.getOrderList()}}]),r}(s["default"]);Object(l["a"])([Object(j["a"])("order/setOrderList")],nt.prototype,"setOrderList",void 0),Object(l["a"])([Object(d["c"])("orderList")],nt.prototype,"TotalePage",null),nt=Object(l["a"])([Object(d["a"])({mixins:[V["a"]]})],nt);var at=nt,ot=at,it=Object(q["a"])(ot,Y,Z,!1,null,null,null),ct=it.exports,ut=function(t){Object(c["a"])(r,t);var e=Object(u["a"])(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.activeName="1",t}return r}(s["default"]);ut=Object(l["a"])([Object(d["a"])({components:{ProductList:M,Coupon:X,OrderList:ct}})],ut);var lt=ut,st=lt,dt=Object(q["a"])(st,f,m,!1,null,null,null),ft=dt.exports,mt=r("7181"),pt=function(t){Object(c["a"])(r,t);var e=Object(u["a"])(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.CurrentType=E["a"].Login,t.Login=E["a"].Login,t.Backoffice=E["a"].Backoffice,t}return Object(i["a"])(r,[{key:"isShow",value:function(t){return this.CurrentType===t}},{key:"created",value:function(){localStorage.getItem("accessToken")?this.CurrentType="Backoffice":(this.CurrentType="Login",this.$router.push({name:"Login"}))}}]),r}(s["default"]);pt=Object(l["a"])([Object(d["a"])({components:{Login:mt["default"],Work:ft}})],pt);var bt=pt,ht=bt,vt=Object(q["a"])(ht,n,a,!1,null,null,null);e["default"]=vt.exports},dbb4:function(t,e,r){var n=r("23e7"),a=r("83ab"),o=r("56ef"),i=r("fc6a"),c=r("06cf"),u=r("8418");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,r,n=i(t),a=c.f,l=o(n),s={},d=0;while(l.length>d)r=a(n,e=l[d++]),void 0!==r&&u(s,e,r);return s}})},e439:function(t,e,r){var n=r("23e7"),a=r("d039"),o=r("fc6a"),i=r("06cf").f,c=r("83ab"),u=a((function(){i(1)})),l=!c||u;n({target:"Object",stat:!0,forced:l,sham:!c},{getOwnPropertyDescriptor:function(t,e){return i(o(t),e)}})},fb6a:function(t,e,r){"use strict";var n=r("23e7"),a=r("861d"),o=r("e8b5"),i=r("23cb"),c=r("50c4"),u=r("fc6a"),l=r("8418"),s=r("b622"),d=r("1dde"),f=r("ae40"),m=d("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),b=s("species"),h=[].slice,v=Math.max;n({target:"Array",proto:!0,forced:!m||!p},{slice:function(t,e){var r,n,s,d=u(this),f=c(d.length),m=i(t,f),p=i(void 0===e?f:e,f);if(o(d)&&(r=d.constructor,"function"!=typeof r||r!==Array&&!o(r.prototype)?a(r)&&(r=r[b],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return h.call(d,m,p);for(n=new(void 0===r?Array:r)(v(p-m,0)),s=0;m<p;m++,s++)m in d&&l(n,s,d[m]);return n.length=s,n}})}}]);
//# sourceMappingURL=chunk-5f2b15ae.ac86f632.js.map